<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smooth Flip Clock</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Roboto Mono', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .clock {
      display: flex;
      gap: 12px;
    }

    .flip-unit {
      position: relative;
      width: 80px;
      height: 120px;
      perspective: 800px;
    }

    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .card-face {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #222;
      border-radius: 6px;
      font-size: 3em;
      overflow: hidden;
      backface-visibility: hidden;
    }

    .card-face.top {
      border-bottom: 2px solid #333;
      transform-origin: bottom;
    }

    .card-face.bottom {
      border-top: 2px solid #333;
      transform-origin: top;
      transform: rotateX(180deg);
    }

    .flip {
      position: absolute;
      width: 100%;
      height: 50%;
      overflow: hidden;
      left: 0;
    }

    .flip.top {
      top: 0;
      transform-origin: bottom;
      background: #222;
      animation: flipTop 0.5s forwards;
    }

    .flip.bottom {
      bottom: 0;
      transform-origin: top;
      background: #222;
      animation: flipBottom 0.5s forwards;
    }

    @keyframes flipTop {
      0% { transform: rotateX(0deg); }
      100% { transform: rotateX(-90deg); }
    }

    @keyframes flipBottom {
      0% { transform: rotateX(90deg); }
      100% { transform: rotateX(0deg); }
    }

    .colon {
      font-size: 3em;
      align-self: center;
      color: #ff7f50;
      width: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="clock">
    <div class="flip-unit" id="h1"></div>
    <div class="flip-unit" id="h2"></div>
    <div class="colon">:</div>
    <div class="flip-unit" id="m1"></div>
    <div class="flip-unit" id="m2"></div>
    <div class="colon">:</div>
    <div class="flip-unit" id="s1"></div>
    <div class="flip-unit" id="s2"></div>
  </div>

  <script>
    function createUnit(container, initial) {
      container.innerHTML = `
        <div class="card">
          <div class="card-face top">${initial}</div>
          <div class="card-face bottom">${initial}</div>
        </div>
      `;
    }

    function flipTo(container, newVal) {
      const top = container.querySelector('.card-face.top');
      const bottom = container.querySelector('.card-face.bottom');
      const currentVal = top.textContent;

      if (currentVal === newVal) return;

      const topFlip = document.createElement('div');
      const bottomFlip = document.createElement('div');
      topFlip.classList.add('flip', 'top');
      bottomFlip.classList.add('flip', 'bottom');
      topFlip.textContent = currentVal;
      bottomFlip.textContent = newVal;

      container.append(topFlip, bottomFlip);

      topFlip.addEventListener('animationend', () => {
        top.textContent = newVal;
        topFlip.remove();
      });

      bottomFlip.addEventListener('animationend', () => {
        bottom.textContent = newVal;
        bottomFlip.remove();
      });
    }

    function getTimeDigits() {
      const now = new Date();
      const hh = now.getHours().toString().padStart(2, '0');
      const mm = now.getMinutes().toString().padStart(2, '0');
      const ss = now.getSeconds().toString().padStart(2, '0');
      return [...hh, ...mm, ...ss];
    }

    const ids = ['h1','h2','m1','m2','s1','s2'];
    const digits = getTimeDigits();

    ids.forEach((id, i) => {
      const el = document.getElementById(id);
      createUnit(el, digits[i]);
    });

    let lastDigits = digits;

    setInterval(() => {
      const newDigits = getTimeDigits();
      newDigits.forEach((d, i) => {
        if (d !== lastDigits[i]) {
          flipTo(document.getElementById(ids[i]), d);
        }
      });
      lastDigits = newDigits;
    }, 1000);
  </script>
</body>
</html>
